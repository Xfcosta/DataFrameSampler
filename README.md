# DataFrameSampler
The program dataframe_sampler can generate a CSV file similar to the one given in input.

### Principle
Each element in a non numerical column is mapped to a numerical value. This is done in one of two ways: 
1. one or more numerical columns can be associated with the non numerical column. If more than one numerical column is associated then a 1-dimensional embedder is used to convert the multidimensional information to a single numerical value.
2. if no numerical column is associated, then we consider the frequency of each element as its associated nomerical value.

A histogram with n_bins is computed for each column. Each bin is then associated with all the non numerical elements whose associated value falls within the bin boundaries.

We can now encode each instance as a vector that has as many dimensions as there are columns, with integers values expressing the corresponding bin.

A new instance is generated by considering an instance x, then randomly sampling a pair of its nearest neighbors, then applying the difference between these neighbors to x to compute a new instance.
The new instance is then decoded to the original space by randomly sampling values from the corresponding bins.

Example:
Consider a data frame with two columns: one containing the name of individuals and one containing the age of the corresponding individual.
We use the age column to map the names to numerical values. Let's consider histograms with 10 bins, so that each bin represents a decade.
When we generate a sample we start by sampling at random an individual, let's say Bob of 40 years of age. We then consider 2 neighbors, let's say Kevin, 30, i.e. bin 3, and John, 50, i.e. bin 5. The difference between the encoding of John and Kevin is 2. We apply the same difference to Bob and we identify the bin 6. We sample in the 6th bin and select Michael (one of the many names associated with the bin 6) and we select an age of 64 (one of the possible ages on bin 6). The sampler outputs therefore the new indivdual: Michael, 64.


### How to use the program
```
Usage: dataframe_sampler.py [OPTIONS]

  The program dataframe_sampler can generate a CSV file similar to the one
  given in input.

Options:
  -i, --input_filename PATH       Path to input CSV file.
  -o, --output_filename PATH      Path to CSV file to generate. By default a
                                  file called "data.csv" will be generated.
  -m, --input_model_filename PATH
                                  Path to fit model.
  -d, --output_model_filename PATH
                                  Path to model to save.
  -f, --vectorizing_columns_dict_filename PATH
                                  Path to vectorizing_columns_dict serialized
                                  in YAML.
  -n, --n_samples INTEGER RANGE   Number of samples to generate. If 0 then
                                  generate the same number of samples as there
                                  are in input. Default is 100.  [x>=0]
  --n_bins INTEGER RANGE          Number of bins.  [x>=2]
  --n_neighbours INTEGER RANGE    Number of neighbours.  [x>=1]
  -c, --sampled_columns TEXT      Selected columns to generate.
  -v, --version                   Show the version and exit.
  -h, --help                      Show this message and exit.
```

### How to use the library

See accompanying IPython notebook [here](https://github.com/Xfcosta/DataFrameSampler/blob/main/dataframe_sampler_notebook.ipynb).


### Installation

```
pip install git+https://github.com/Xfcosta/DataFrameSampler.git
cd DataFrameSampler
pip install -r requirements.txt
```
